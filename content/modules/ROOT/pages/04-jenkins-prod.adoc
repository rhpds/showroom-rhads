= Advanced Developer Suite Demo Instructions
Red Hat Advanced Developer Suite with Enterprise Contract and GitOps Promotion using Jenkins
:source-highlighter: rouge
:toc: macro
:toclevels: 1

== Part 1 — Set the Stage

=== Know
_ACME’s Black Friday success requires safe, fast production deployments. RHADS transforms risky manual processes into confident automated workflows while preserving millions in Jenkins investments._

**Business Value:**

* Production deployment time: 2–3 weeks → 30 minutes
* Zero manual security reviews or bottlenecks
* Complete SOC 2 and PCI audit trails automatically
* No need to replace proven Jenkins workflows

=== Show
This demo will use Jenkins with Enterprise Contract, Artifact Signer, and GitOps (Argo CD) to:

* Validate container images
* Tag validated images for production
* Update GitOps manifests for automated deployment

== Part 2 — Understand the Promotion Flow

=== Know
_ACME’s enhanced Jenkins pipeline supports both staging and production promotions with different triggers and controls — while using the same workflow._

**Trigger Types:**

[cols="1,2",options="header"]
|===
| Trigger | Action
| Git tag push | Promote image to *staging* (`stage` overlay)
| GitLab Release | Promote image to *production* (`prod` overlay)
|===

**Business Value:**

* Staging speed via Git tag push
* Intentional production gates via GitLab Release
* Different validation rigor per environment
* Consistency from reusing the same Jenkins pipeline

=== Show
The same pipeline runs for both environments, but the trigger type changes the overlay and validation process.

== Part 3 — Promote to Production via GitLab Release

=== Know
_ACME’s transformation from risky manual releases to confident, automated Jenkins deployments — GitLab Release triggers enterprise-grade validation and GitOps promotion._

**Business Value:**

* Production promotion: 2–3 weeks → 30 minutes
* Zero manual reviews or coordination
* Automatic audit trails via Jenkins and GitOps

=== Show
* Open `{gitlab_url}/development/my-quarkus-jnk`
+
[subs=attributes+]
----
Username: {gitlab_user}
Password: {gitlab_user_password}
----

image::jenkins-prod-1.png[]

* Go to *Deploy → Releases*

image::jenkins-prod-2.png[]

* Click *Create a new release*
* Select the existing tag (e.g. `v1.0`), optionally add notes, click *Create release*

image::jenkins-prod-3.png[]

* In **Developer Hub**, go to *Catalog* → *my-quarkus-jnk* → *CI* tab

image::jenkins-prod-7.png[]

* Find **promote-to-prod** pipeline run, click *View build*, then *Open Blue Ocean*

image::jenkins-prod-4.png[]

image::jenkins-prod-5.png[]

== Part 4 — Jenkins Pipeline Stages

=== Know
_ACME’s Jenkins promotions combine automation, compliance, and zero manual errors._

[cols="1,3",options="header"]
|===
| Stage | Description
| gather-images | Fetch release tag from GitLab, map to staged container image, save `images.json` for traceability.
| verify-ec | Validate image signatures, SBOM, provenance, CVEs, and org rules using Enterprise Contract.
| update-image-tag-for-prod | Retag verified image as `prod-vX.Y` for audit clarity.
| deploy-to-prod | Patch `prod` overlay in GitOps repo, triggering Argo CD to auto-deploy.
|===

=== Show
**Example — gather-images output**
[source,json]
----
{
  "components": [
    {
      "containerImage": "quay-{guid}/tssc/my-quarkus-jnk:v1.0",
      "source": {
        "git": {
          "url": "{gitlab_url}/development/my-quarkus-jnk",
          "revision": "v1.0"
        }
      }
    }
  ]
}
----

**Enterprise Contract validation**
[source,bash]
----
cosign initialize \
  --mirror https://tuf.tssc-tas.dev \
  --root https://tuf.tssc-tas.dev/root.json

ec validate image \
  --image quay-{guid}/tssc/my-quarkus-jnk:v1.0 \
  --policy default \
  --public-key k8s://openshift/trusted-keys \
  --output json
----

**Re-tag for production**
[source,bash]
----
skopeo copy \
  docker://quay-{guid}/tssc/my-quarkus-jnk:v1.0 \
  docker://quay-{guid}/tssc/my-quarkus-jnk:prod-v1.0
----

**GitOps deployment patch**
[source,yaml]
----
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-quarkus-jnk
spec:
  template:
    spec:
      containers:
        - name: my-quarkus-jnk
          image: quay-{guid}/tssc/my-quarkus-jnk:prod-v1.0
----

== Part 5 — Summary

=== Know
* ACME reduced production promotion from 2–3 weeks to 30 minutes using automated Jenkins workflows
* Security compliance became automatic instead of a manual bottleneck
* GitOps ensures deployments are consistent and fully auditable
* Existing Jenkins investment is preserved and enhanced

=== Show
End-to-end production promotion flow:

[cols="1,1",options="header"]
|===
| Step | Description

| Git Release
| Triggers the Jenkins production promotion pipeline

| gather-images
| Jenkins retrieves the image from development and records its metadata.

| verify-ic
| Image is validated for signatures, SBOM, provenance, and CVEs.

| update-image-tag-for-prod
| Image is re-tagged as `<image>:prod-<tag>` after passing checks.

| deploy-to-prod
| Jenkins updates the prod overlay in the GitOps repo, and Argo CD deploys it automatically.
|===

== Part 6 — Wrap-Up

=== Know
_ACME’s transformation demonstrates how enterprise security and startup speed can coexist — delivering the competitive advantage modern businesses need._

=== Show

==== Business Results for ACME

* **Speed to Market:** Production promotion 2–3 weeks → 30 minutes (1,400% improvement)
* **Cost Reduction:** Avoids replacing millions in Jenkins infrastructure
* **Risk Mitigation:** 100% security compliance with zero manual reviews
* **Developer Productivity:** No infrastructure delays, faster delivery
* **Audit Readiness:** Real-time compliance evidence instead of weeks of preparation
* **Operational Consistency:** GitOps ensures identical deployments every time

==== Why This Matters for Your Business

* **Revenue Impact:** Faster releases directly increase market competitiveness
* **Cost Control:** Maximize ROI from existing CI/CD investments
* **Risk Management:** Automated security prevents costly production incidents
* **Operational Excellence:** Standardized processes across all environments
* **Regulatory Confidence:** Built-in compliance for SOC 2, PCI, and industry requirements
* **Talent Retention:** Developers stay productive with familiar tooling

==== The ACME Success Formula

RHADS proved that modern enterprises can achieve:

* **Enterprise-grade security** without enterprise-grade delays
* **Startup-like velocity** without startup-like risk
* **Platform team efficiency** without compromising developer experience
* **Compliance readiness** without manual overhead
